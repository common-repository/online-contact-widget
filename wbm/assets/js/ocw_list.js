import{_}from"./fetch.js";import{o as n,e as o,f as s,F as u,g as r,h as i,t as c}from"./vendor.js";const m={name:"MyWorkOrder",inject:["reload"],components:{},data(){return{items:[],isLoaded:!1,status:1,total:1,num:10,page:1,cnf:{}}},mounted(){const t=this;t.status=t.$route.query.status?t.$route.query.status:0,t._getData()},methods:{_getData(){const t=this;t.$api.getData({_ajax_nonce:t.$cnf.ocw_ajax_nonce||"",action:"wb_ocw_api",op:"my_wo",status:t.status}).then(a=>{t.items=a.data.items,t.total=a.data.total,t.cnf=a.data.cnf,t.isLoaded=!0})},loadData(t){const a=this;a.$api.getData({_ajax_nonce:a.$cnf.ocw_ajax_nonce||"",action:"wb_ocw_api",do:"my_wo",status:a.status,page:t}).then(d=>{a.items=d.data.items,a.total=d.data.total,a.page=t})},switchStatus(t){this.status=t,this._getData()},getStatus(t){return t.status==2?'<span class="wb-status-tag done">已关闭</span>':t.is_new==1?'<span class="wb-status-tag wk">待回复</span>':'<span class="wb-status-tag new">新消息</span>'},goDetail(t){this.$router.push({path:"/detail",query:{id:t.id}})}}},h=s("div",{class:"wbm-hd"},[s("h1",null,"我的咨询")],-1),p={key:0,class:"mb-content-table"},w={key:0,class:"table-data-list"},b=s("thead",null,[s("tr",null,[s("th",null,"咨询类型"),s("th",null,"联系人"),s("th",null,"联系方式"),s("th",null,"时间")])],-1),y={class:"wbm-rec-type"},f={class:"wbm-rec-subject"},g={class:"wbm-pd-title"},k={key:0},x={key:1},D={key:2},q={key:3},j={class:"wbm-wk"},$={key:1,class:"com-empty-rec"},L=s("div",{class:"cer-inner"},[s("svg",{class:"wb-icon wbm-sico-nodata"},[s("use",{"xlink:href":"#wbm-sico-nodata"})]),s("p",null,"暂无记录")],-1),B=[L];function S(t,a,d,v,l,F){return n(),o(u,null,[h,l.isLoaded?(n(),o("div",p,[l.items.length?(n(),o("table",w,[b,s("tbody",null,[(n(!0),o(u,null,r(l.items,e=>(n(),o("tr",{key:"wo"+e.sn},[s("td",null,[s("span",y,c(l.cnf.type[e.type]),1)]),s("td",null,[s("div",f,c(e.name),1)]),s("td",null,[s("div",g,[e.qq?(n(),o("div",k,"QQ: "+c(e.qq),1)):i("",!0),e.mobile?(n(),o("div",x,"手机: "+c(e.mobile),1)):i("",!0),e.wx?(n(),o("div",D,"微信: "+c(e.wx),1)):i("",!0),e.email?(n(),o("div",q,"邮箱: "+c(e.email),1)):i("",!0)])]),s("td",null,[s("span",j,c(e.update_time),1)])]))),128))])])):i("",!0),l.items.length?i("",!0):(n(),o("div",$,B))])):i("",!0)],64)}const V=_(m,[["render",S]]);export{V as default};
